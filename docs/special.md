# 特殊抽取规则

洛谷抽题还提供了另外三种类型的自定义抽取规则文件：

## `weighted`

与正常的自定义抽取规则文件相似，但是为每个抽取规则添加了一个键：`weight`，代表这个抽取规则的权重。

键 `weight` 可以被**省略**，默认值为 1。

在所有抽取规则中，只要有一个抽取规则中含有键 `weight`，则认为这个抽取规则文件的类型为 `weighted`。

例子如下：

```
[
    {
        "type": "P",
        "difficulty": [3, 4, 5],
        "weight": 5
    },
    {
        "type": "CF",
        "difficulty": [3, 4, 5],
        "translated": true
    }
]
```

对于这个例子，代码实现上，满足第一个抽取规则的题目将会被放到最终列表中 5 次，而满足第二个抽取规则的题目只会被放到最终列表中 1 次。

---

## `special`

类型为 `special` 的自定义抽取规则文件的每一个抽取规则都是一个**字符串**，抽取时列表中抽取。

特别地，如果字符串的内容不是洛谷题目 ID，自动打开题目功能将失效。

例子如下：

```
[
    "kkksc03",
    "chenzhe",
    "xht",
    "soha"
]
```

抽取时：

```
找到 4 个符合条件的题目.

请输入命令: 3
['kkksc03', 'soha', 'chenzhe']

请输入命令: -6
['kkksc03', 'kkksc03', 'chenzhe', 'xht', 'kkksc03', 'kkksc03']
```

---

## `weighted_special`

在 `special` 的基础上加入了权重。

每一个抽取规则都是一个对象，有 `text` 和 `weight` 两个键。是类型 `special` 和 `weighted` 的结合体。

键 `weight` 可以被**省略**，默认值为 1。

```
[
    {
        "text": "摸鱼",
        "weight": 4
    },
    {
        "text": "刷题"
    }
]
```

抽取时：

```
找到 2 个符合条件的题目.

请输入命令: 1
['摸鱼']

请输入命令: -6
['摸鱼', '摸鱼', '摸鱼', '摸鱼', '刷题', '摸鱼']
```

---

要注意的是，自定义抽取规则文件的类型由程序自动辨别。规则如下：

* 若列表的第一项都是**字符串**，为 `special` 类型；
* 若列表的第一项含有键 `text`，为 `weighted_special` 类型；
* 若列表的**某**一项含有键 `weight`，为 `weighted` 类型；
* 否则，为 `standard` 类型。